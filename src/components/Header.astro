---
import { Badge } from "@/components/ui/badge";
import { UserMenu } from "@/components/UserMenu";

const pathname = Astro.url.pathname;

function isActive(href: string) {
  if (href === "/") return pathname === "/";
  return pathname === href || pathname.startsWith(href + "/");
}

const navLinks = [
  { href: "/blog", label: "News & Logs" },
  { href: "/about", label: "Operative Profile" },
];
---

<header
  class="sticky top-0 z-50 w-full border-b border-border/50 bg-background/95 backdrop-blur supports-[backdrop-filter]:bg-background/60"
>
  <div
    class="container mx-auto flex h-16 items-center justify-between px-4 md:px-8"
  >
    <div class="flex items-center gap-4">
      <a
        href="/"
        class="text-lg sm:text-xl font-mono font-bold text-primary tracking-widest uppercase hover:text-primary/80 transition-colors"
      >
        &gt;_MARATHON<span class="animate-blink">_</span>
      </a>
      <Badge
        variant="outline"
        className="hidden sm:inline-flex rounded-none border-primary/50 text-primary font-mono text-xs animate-pulse"
      >
        NETWORK STATUS: SECURE
      </Badge>
    </div>

    <nav
      class="hidden md:flex items-center gap-4 md:gap-6 font-mono text-xs sm:text-sm uppercase tracking-widest"
    >
      {
        navLinks.map((link) => {
          const active = isActive(link.href);
          return (
            <a
              href={link.href}
              class={`transition-colors flex items-center gap-1 group relative
              ${
                active
                  ? "text-primary shadow-[0_0_10px_rgba(var(--primary),0.5)]"
                  : "text-muted-foreground hover:text-primary"
              }`}
            >
              <span class="opacity-0 group-hover:opacity-100 transition-opacity">
                ]
              </span>
              {link.label}
              <span class="opacity-0 group-hover:opacity-100 transition-opacity">
                [
              </span>
              {active && (
                <span class="absolute -bottom-[1px] left-0 w-full h-px bg-primary" />
              )}
            </a>
          );
        })
      }

      <div class="h-4 w-px bg-border/50 mx-2 hidden sm:block"></div>

      <UserMenu client:load />
    </nav>
  </div>
</header>
